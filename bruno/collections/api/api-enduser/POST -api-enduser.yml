info:
  name: POST /api/enduser
  type: http
  seq: 1

http:
  method: POST
  url: "{{baseURL}}/api/enduser"
  body:
    type: json
    data: ""
  auth: inherit

runtime:
  scripts:
    - type: before-request
      code: |-
        bru.setVar("temporaryEndUserRoleID", bru.getProcessEnv("TEMPORARY_END_USER_ROLE_ID") || null);
        bru.setVar("temporaryEmployeeID", bru.getProcessEnv("TEMPORARY_END_USER_EMPLOYEE_ID") || null);

        req.setBody({
          EndUserName: bru.getProcessEnv("TEMPORARY_END_USER_NAME"),
          EndUserPassword: bru.getProcessEnv("TEMPORARY_END_USER_PASSWORD"),
          EndUserRoleID: bru.getVar("temporaryEndUserRoleID"),
          EmployeeID: bru.getVar("temporaryEmployeeID")
        });
  assertions:
    - expression: res.body.EndUserID
      operator: isDefined
    - expression: res.body.EndUserID
      operator: isString
    - expression: res.body.EndUserID
      operator: isNotEmpty
    - expression: res.body.EndUserName
      operator: eq
      value: "{{process.env.TEMPORARY_END_USER_NAME}}"
    - expression: res.body.EndUserRoleID
      operator: eq
      value: "{{temporaryEndUserRoleID}}"
    - expression: res.body.EmployeeID
      operator: eq
      value: "{{temporaryEmployeeID}}"

settings:
  encodeUrl: true
  timeout: 0
  followRedirects: true
  maxRedirects: 5
